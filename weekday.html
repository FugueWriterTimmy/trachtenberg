<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Day of Week Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 40px;
      max-width: 800px;
      margin: auto;
      background-color: #fdfdfd;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
    }
    input[type="date"] {
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 100%;
      max-width: 300px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #45a049;
    }
    .section {
      margin-top: 40px;
    }
    .steps {
      background: #f2f7f5;
      padding: 20px;
      border-radius: 12px;
      white-space: pre-wrap;
      font-family: Consolas, monospace;
      font-size: 14px;
      line-height: 1.6;
      border: 1px solid #dcdcdc;
    }
  </style>
</head>
<body>
  <h1>Day-of-Week Calculator</h1>
  <label for="date">Enter a date:</label>
  <input type="date" id="date" />
  <button onclick="calculateAll()">Calculate</button>

  <div class="section">
    <h2>Wang's Method</h2>
    <div id="wang" class="steps"></div>
  </div>

  <div class="section">
    <h2>Nakai's Method</h2>
    <div id="nakai" class="steps"></div>
  </div>

  <div class="section">
    <h2>Odd+11 Method</h2>
    <div id="odd11" class="steps"></div>
  </div>

<script>
  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

  // Wang's method (unchanged)
  const nullDays = [1, 12, 5, 2, 7, 4, 9, 6, 3, 8, 12, 10];
  function calculateWang(year, month, day) {
    const y0 = year % 10;
    const y1 = Math.floor((year % 100) / 10);
    const c = Math.floor(year / 100);
    const cmod = c % 4;
    const isLeap = (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));
    const d0 = nullDays[month - 1];

    const term1 = day - d0;
    const term2 = y0 - y1;
    const term3 = Math.floor(y0 / 4 - y1 / 2);
    const term4 = -2 * cmod;
    let total = term1 + term2 + term3 + term4;
    if (isLeap && month <= 2) total -= 1;

    const w = ((total % 7) + 7) % 7;
    return `Date: ${year}-${month}-${day}
Null-day = ${d0}
y₀ = ${y0}, y₁ = ${y1}, Century = ${c}, c mod 4 = ${cmod}

(${day} - ${d0}) + (${y0} - ${y1}) + ⌊${y0}/4 - ${y1}/2⌋ + -2×${cmod}` +
           (isLeap && month <= 2 ? " - 1 (leap year)" : "") +
           ` = ${total}
Day: ${dayNames[w]}`;
  }

  // Nakai method using Wikipedia formula:
  const doomsdays = {
    1: 3,   // Jan 3 (non-leap), Jan 4 (leap) handled below
    2: 28,  // Feb 28 (non-leap), Feb 29 (leap)
    3: 14,
    4: 4,
    5: 9,
    6: 6,
    7: 11,
    8: 8,
    9: 5,
    10: 10,
    11: 7,
    12: 12
  };

  function calculateNakai(year, month, day) {
    const c = Math.floor(year / 100);
    const y = year % 100;
    const c2 = c % 4;
    const y2 = y % 4;
    const isLeap = (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));

    let doomsday = (5 * (c2 + y2 - 1) + 10 * y) % 7;
    if (doomsday < 0) doomsday += 7;

    let monthDoomsday = doomsdays[month];
    if (isLeap) {
      if (month === 1) monthDoomsday = 4;
      if (month === 2) monthDoomsday = 29;
    }

    const diff = day - monthDoomsday;
    let w = (doomsday + diff) % 7;
    if (w < 0) w += 7;

    return `Date: ${year}-${month}-${day}

Century (c): ${c}
Year last two digits (y): ${y}
c mod 4 (c₂): ${c2}
y mod 4 (y₂): ${y2}

Doomsday calculation:
5 × (c₂ + y₂ − 1) + 10 × y = 5 × (${c2} + ${y2} − 1) + 10 × ${y} = ${5 * (c2 + y2 - 1)} + ${10 * y} = ${5 * (c2 + y2 - 1) + 10 * y}
Doomsday (mod 7) = ${doomsday}

Month doomsday date: ${monthDoomsday} (adjusted for leap year if applicable)
Difference (day - month doomsday): ${day} - ${monthDoomsday} = ${diff}

Weekday index = (doomsday + difference) mod 7 = (${doomsday} + ${diff}) mod 7 = ${w}

Day of the week: ${dayNames[w]}
`;
  }

  // Odd+11 method, researched version:
  // Year share calculation with Odd+11 steps + century + month + day + leap adj
  // Century codes repeat every 400 years: for Gregorian calendar:
  // 1600s=6, 1700s=4, 1800s=2, 1900s=0, 2000s=6, etc.
  // Month codes same as Nakai's doomsday month anchor (we'll reuse Nakai's doomsdays)
  
  const centuryCodes = {
    16: 2,
    17: 0,
    18: 5,
    19: 3,
    20: 2,
    21: 0,
    22: 5,
    23: 3
    // Expand as needed
  };

  function oddPlus11YearShare(y) {
    let steps = `Start with year last two digits: y = ${y}`;
    if (y % 2 === 1) {
      y += 11;
      steps += `\nOdd → y + 11 = ${y}`;
    }
    y = y / 2;
    steps += `\nDivide by 2 → ${y}`;
    if (y % 2 === 1) {
      y += 11;
      steps += `\nOdd again → y + 11 = ${y}`;
    }
    let mod7 = y % 7;
    steps += `\nModulo 7 → ${mod7}`;
    let yearShare = (7 - mod7) % 7;
    steps += `\nSubtract from 7 → year share = ${yearShare}`;
    return {yearShare, steps};
  }

  function calculateOdd11(year, month, day) {
    const c = Math.floor(year / 100);
    const y = year % 100;
    const isLeap = (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));

    // Get century code, default 0 if unknown
    const cc = centuryCodes[c] !== undefined ? centuryCodes[c] : 0;

    // Get month doomsday as month code
    let monthCode = doomsdays[month];
    if (isLeap) {
      if (month === 1) monthCode = 4;
      if (month === 2) monthCode = 29;
    }

    const {yearShare, steps} = oddPlus11YearShare(y);

    const total = yearShare + cc + day - monthCode;
    const w = ((total % 7) + 7) % 7;

    return `Date: ${year}-${month}-${day}

Century (c): ${c}
Century code: ${cc}
Year last two digits (y): ${y}
Leap year: ${isLeap}

Year share calculation steps:
${steps}

Month code (doomsday date): ${monthCode}
Day of month: ${day}

Sum = year share + century code + day - month code
    = ${yearShare} + ${cc} + ${day} - ${monthCode} = ${total}

Modulo 7 → ${w}

Day of the week: ${dayNames[w]}
`;
  }

  function calculateAll() {
    const input = document.getElementById("date").value;
    if (!input) {
      alert("Please enter a date.");
      return;
    }
    const [yearStr, monthStr, dayStr] = input.split("-");
    const year = parseInt(yearStr, 10);
    const month = parseInt(monthStr, 10);
    const day = parseInt(dayStr, 10);

    document.getElementById("wang").innerText = calculateWang(year, month, day);
    document.getElementById("nakai").innerText = calculateNakai(year, month, day);
    document.getElementById("odd11").innerText = calculateOdd11(year, month, day);
  }
</script>
</body>
</html>
